colorscheme molokai

" autocommands
autocmd LocationChange ^https://mail\.google\.com/ :normal! <C-z>
autocmd PageLoad ^https://accounts\.google\.com/ :normal! gi

" custom styles {{{
" -----------------
" reflets: more space for content, improved readability
style reflets.info   body {color: black !important}
" nyaa: highlight overed row
style nyaa.eu        .tlistrow:hover{background-color:#d0ddd0}
" youtube: always display description (no javascript needed)
style youtube.com    #watch-description-content{overflow:visible !important} #watch-description-toggle{display:none !important} #watch-description-extras{display:block !important} #watch-description-clip{position:relative !important}
" dark gtk theme fixes
style github.com     #pull_request_body{color: #333}
style code.google.com input[type='button'], input[type='submit'], .butonify {color: #090909}
" }}}

" misc settings {{{
" -----------------
set complete=location,file
set guioptions=s
set hlfind
set sanitizeshutdown=commandline,history,cookies,sessions
set editor='urxvt -e vim -f +<line> +"sil! call cursor(0, <column>)" <file>'
set scrolltime=5
set showmode=caret,!normal,!find,!ex,!hints,base
" output_multiline,operator,repl,text_edit,visual

" do not want ;y to yank img[src]
set extendedhinttags=[iI]:img,[asOTvVWy]:':-moz-any-link',area[href],iframe[src],[A]:[id],a[name],[f]:body,[F]:body,code,div,html,p,pre,span,[S]:'input:not([type=hidden])',textarea,button,select

" patterns (improved for navigating french sites)
set previouspattern='[←<«] Prev$','\bprev(ious)?\b','Précédent','plus ancien','\bolder\b',^<$,'^(←|<<|«)$','^(←|<|«)','(←|<|«)$'
set nextpattern='^Next [→>»]','\bnext\b','Suivant','plus récent','^>$','^(→|>>|»)$','(→|>|»)$','^(→|>|»)','\bmore\b'

" search with duckduckgo by default
set defsearch=d
" }}}

" mappings {{{
" ============

" navigation basics {{{
" ---------------------
" history
map b <A-Left>
map m <A-Right>
map H :jump<CR>

" tabs
map <S-tab> :tabp<CR>
map <tab> :tabn<CR>
map <C-t> :tabopen<CR>
map > :tabmove! +1<CR>
map < :tabmove! -1<CR>
map D :tabclose<CR>:tabp<CR>
map gy :tabdu<CR>

" zooming
map + zI
map -- - zO

" Quickmarks
map \' `

" Quit, saving session
map ZZ :set sanitizeshutdown=<CR>:xall<CR>

" remove highlightings for find pattern matches
map <Space> :noh<CR>

" source
map vs y:tabopen view-source:<S-Ins><CR>
map vS <view-source-externally>

map <left> [[
map <right> ]]
map I :pageinfo 
map S :saveas 
" }}}

" various places shortcuts {{{
" ----------------------------
"addons
map ga :open about:addons<CR>
map gA :tabopen about:addons<CR>

" scrapbook
map gs :open chrome://scrapbook/content/manage.xul<CR><C-z>
map gS :tabopen chrome://scrapbook/content/manage.xul<CR><C-z>
map s :sidebar! Scrapbook<CR>

" places (bookmarks, history,…)
map gp :open chrome://browser/content/places/places.xul<CR><C-z>
map gP :tabopen chrome://browser/content/places/places.xul<CR><C-z>

" Gmail
map gm ohttp://mail.google.com<CR>
map gM thttp://mail.google.com<CR>
" }}}

" search engines mapping {{{
" --------------------------
" animeka
map ,a  oa 
map ,pa oa <S-ins><CR>
map ,Pa ta <S-ins><CR>
" arch wiki
map ,A  oaw 
map ,pA oaw <S-ins><CR>
map ,PA taw <S-ins><CR>
" arch topic
map ,t  oat 
map ,pt oat <S-ins><CR>
map ,Pt tat <S-ins><CR>
" conjugueur
map ,c  oconj 
map ,pc oconj <S-ins><CR>
map ,Pc tconj <S-ins><CR>
" duckduckgo
map ,d  od 
map ,pd od <S-ins><CR>
map ,Pd td <S-ins><CR>
" en → fr
map ,e  oen 
map ,pe oen <S-ins><CR>
map ,Pe ten <S-ins><CR>
" fr → en
map ,f  ofr 
map ,pf ofr <S-ins><CR>
map ,Pf tfr <S-ins><CR>
" images
map ,i  oi 
map ,pi oi <S-ins><CR>
map ,Pi ti <S-ins><CR>
" jamendo
map ,j  ojam 
map ,pj ojam <S-ins><CR>
map ,Pj tjam <S-ins><CR>
" yopmail
map ,y  oyop 
map ,py oyop <S-ins><CR>
map ,Py tyop <S-ins><CR>
" nyaa
map ,n  onyaa 
map ,pn onyaa <S-ins><CR>
map ,Pn tnyaa <S-ins><CR>
" map
map ,m  omap 
map ,pm omap <S-ins><CR>
map ,Pm tmap <S-ins><CR>
" ohloh
map ,o  oohloh 
map ,po oohloh <S-ins><CR>
map ,Po tohloh <S-ins><CR>
" tinysub
map ,s  osub 
map ,ps osub <S-ins><CR>
map ,Ps tsub <S-ins><CR>
" urban dictionary
map ,u  oslang 
map ,pu oslang  <S-ins><CR>
map ,Pu tslang  <S-ins><CR>
" youtube
map ,Y  oyou 
map ,pY oyou <S-ins><CR>
map ,PY tyou <S-ins><CR>
" wikipedia
map ,w  ow 
map ,pw ow <S-ins><CR>
map ,Pw tw <S-ins><CR>
" wikipedia en
map ,W  owe 
map ,pW owe <S-ins><CR>
map ,PW twe <S-ins><CR>
" wikibooks
map ,b  books 
map ,pb books <S-ins><CR>
map ,Pb books <S-ins><CR>
" }}}

" miscellanous {{{
" ----------------
" clear google cookies
command! gquit,gq sanitize -host google.com
				\ sanitize -host google.fr
				\ cookies google.com clear
				\ cookies google.fr clear

" clear google cookies and delete tab (quick logout)
map gd :gquit<CR>d

" jamendo info page for current mpd song
map gj :!gojam<CR>

" get rid of the error message appearing when I (un)plug my laptop AC
map <Sleep> <Esc>
" }}}
" }}}

" commands {{{
" ------------

" create search engines bookmarks
command! installsearchengines -description 'Create bookmarks for quite a bunch of different search engines'
		\ silent bmark -tags search -k a     -title 'animeka'             http://www.animeka.com/search/index.html?req=%s&cat=search&type_search=all -k a
		\ silent bmark -tags search -k d     -title 'DuckDuckGo'          https://duckduckgo.com/?q=%s&kr=b&k1=-1&kv=1&k2=-1&ke=-1&kj=ct&ky=e&kx=e&k9=#666666&kaa=#CCCCCC -k d
		\ silent bmark -tags search -k aw    -title 'ArchWiki'            http://wiki.archlinux.org/index.php?title=Special%%3ASearch&search=%s&go=Go
		\ silent bmark -tags search -k aur   -title 'AUR'                 https://aur.archlinux.org/packages.php?K=%s
		\ silent bmark -tags search -k at    -title 'Arch Forum (topics)' https://bbs.archlinux.org/search.php?action=search&keywords=%s&show_as=topics
		\ silent bmark -tags search -k ap    -title 'Arch Forum (posts)'  https://bbs.archlinux.org/search.php?action=search&keywords=%s&show_as=posts
		\ silent bmark -tags search -k conj  -title 'Conjugaison Fr'      http://www.wordreference.com/conj/FRverbs.aspx?v=%s
		\ silent bmark -tags search -k en    -title 'Fr → En'             http://www.wordreference.com/fren/%s
		\ silent bmark -tags search -k fr    -title 'En → Fr'             http://www.wordreference.com/enfr/%s
		\ silent bmark -tags search -k i     -title 'Google Images'       http://google.fr/images?q=%s&biw=1440&bih=900&tbm=isch
		\ silent bmark -tags search -k jam   -title 'Jamendo'             http://www.jamendo.com/fr/search/#qs=q=%s&bq=freetext
		\ silent bmark -tags search -k yop   -title 'Yopmail'             http://www.yopmail.com/%s
		\ silent bmark -tags search -k nyaa  -title 'NyaaTorrents'        http://www.nyaa.eu/?page=search&cats=0_0&filter=0&term=%s
		\ silent bmark -tags search -k ost   -title 'OST-Center'          http://www.ost-center.fr/recherche.php?mots_cles=%s
		\ silent bmark -tags search -k map   -title 'Google Maps'         http://maps.google.fr/maps?hl=fr&q=%s&um=1&ie=UTF-8&sa=N&tab=wl
		\ silent bmark -tags search -k sub   -title 'TinySubs'            http://tinysubs.com/search.php?q=%s&language_id=22
		\ silent bmark -tags search -k slang -title 'Urban Dictionary'    http://www.urbandictionary.com/define.php?term=%s
		\ silent bmark -tags search -k you   -title 'Youtube'             http://www.youtube.com/results?search_query=%s
		\ silent bmark -tags search -k osm   -title 'Open Street Map'     http://nominatim.openstreetmap.org/search?q=%s
		\ silent bmark -tags search -k w     -title 'Wikipédia Fr'        http://fr.wikipedia.org/w/index.php?search=%s
		\ silent bmark -tags search -k we    -title 'Wikipedia En'        http://en.wikipedia.org/w/index.php?search=%s
		\ silent bmark -tags search -k def   -title 'Wiktionary'          http://fr.wiktionary.org/w/index.php?search=%s
		\ silent bmark -tags search -k books -title 'Wikibooks'           http://wikibooks.org/search-redirect.php?family=wikibooks&search=%s&language=fr
		\ silent bmark -tags search -k imdb  -title 'IMDB'                http://imdb.com/find?s=all&q=%s
		\ silent bmark -tags search -k df    -title 'Dwarf Fortress Wiki' http://dwarffortresswiki.org/index.php?title=Special%3ASearch&search=%s&go=Go
		\ silent bmark -tags search -k ohloh -title 'Ohloh'               https://www.ohloh.net/p?q=%s

" useragent switching
command! uagent -description 'Change user-agent' -nargs=? -complete custom,'[["default","Default user-agent"],[navigator.userAgent,"Current user-agent"],["Googlebot/2.1 (+http://www.googlebot.com/bot.html)","Googlebot"],["Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17","Chrome 24 for Windows 7"],["Mozilla/5.0 (compatible; MSIE 9.0; X11; Linux x86_64; Trident/5.0)","Internet Explorer 9.0 for Linux :p"]]'
		\ -js
		\ if(args.length) {
		\ 	if(args[0]=="default")
		\ 		Cc["@mozilla.org/preferences-service;1"].getService(Ci.nsIPrefBranch).clearUserPref("general.useragent.override");
		\ 	else
		\ 		Cc["@mozilla.org/preferences-service;1"].getService(Ci.nsIPrefBranch).setCharPref("general.useragent.override",args[0]);
		\ 	commandline.echo("New user-agent: "+navigator.userAgent, commandline.HL_QUESTION);
		\ }
		\ else
		\ 	commandline.echo("Current user-agent: "+navigator.userAgent, commandline.HL_QUESTION);
" }}}

" vim:set syntax=vim foldmethod=marker:
